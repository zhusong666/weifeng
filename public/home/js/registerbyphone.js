var isCurrentSite=false;var warningConfirmed=false;var countryRegions=[];var showCountryRegions=[];$(document).ready(function(){initInputContent();(function(){var e=$("#tabPhone").width();var r=$("#tabMail").width();var o=e>r?e:r;$("#tabPhone").width(o+2+"px");$("#tabMail").width(o+2+"px");$(".reg-tab").css("visibility","visible");if(localInfo.urlCountrySiteID==localInfo.currentSiteID){isCurrentSite=true}var t=$("#username");var n=t.val();t.blur(function(){if(t.val()&&n!=t.val()){n=t.val();var e=$("#countryCode").val();if(e.indexOf("+")>-1){e=e.replace("+","00")}if(this.value.length>0&&valiMobile(this.value)){checkExistAuto(t)}else if(this.value.length==0){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.emptyphone)}else if(!valiMobile(this.value)){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error)}}})})();$("#passwdEye").click(function(){var e=document.getElementById("password").type;if(e=="password"){document.getElementById("password").type="text";document.getElementById("confirmPwd").type="text";$(this).attr("src",XSSGuard4URL(localInfo.eyeon))}else{document.getElementById("password").type="password";document.getElementById("confirmPwd").type="password";$(this).attr("src",XSSGuard4URL(localInfo.eyeoff))}});var e=localInfo.countryCodes.split(",");changeInputCountryCode(e);getCountryRegion();displayCountry();var r=$("#randomCode");validator.bind(r,{type:["require","length"],trim:true,min:4,max:4,validOnChange:false,errorClassEMUI5:"input-error-EMUI5",errorBorder:$("#randomCodeDiv"),errorFunction:function(e,r){switch(r.type){case"require":showRandomCodeError(rss.picture_verfication_code_null_error);break;case"length":showRandomCodeError(rss.login_js_codeerror);break}},successFunction:function(e,r){hideRandomCodeError()},reInputFunction:function(){hideRandomCodeError();$("#authCodeRight").removeClass("poptips-yes")}});$("#randomCode").bind("keyup",function(e){validateInput();checkImgAuthCode()});if($("#randomCode").val().length>0){chgRandomCodeForReset()}validateInput();getAgreementContent(localInfo.currentCountryCode);if($("#birthDate").length>0){showBirthDayDropBox()}});function showBirthDayDropBox(){$("#birthDate").datePickEMUI5({yearChange:function(){$("#birthdayError").html("");$("#birthDateWrap").removeClass("input-error-EMUI5");if($("#birthDate").datePickEMUI5("M")){if($("#birthDate").datePickEMUI5("D")){checkBirthday()}}},monthChange:function(){$("#birthdayError").html("");$("#birthDateWrap").removeClass("input-error-EMUI5");if($("#birthDate").datePickEMUI5("Y")){if($("#birthDate").datePickEMUI5("D")){checkBirthday()}}},dayChange:function(){$("#birthdayError").html("");$("#birthDateWrap").removeClass("input-error-EMUI5");if($("#birthDate").datePickEMUI5("D")&&$("#birthDate").datePickEMUI5("M")&&$("#birthDate").datePickEMUI5("Y")){checkBirthday()}},format:"Y-M-D",yearSuffix:rss.year,monthSuffix:rss.month,yearSpace:false,daySuffix:rss.day})}$(function(){var e=jQuery("#registerForm input[name='formBean.username']");var r=jQuery("#registerForm input[name='formBean.password']");var o=jQuery("#registerForm input[name='checkPassword']");var t=jQuery("#registerForm input[name='formBean.authCode']");var n=jQuery("#registerForm input[name='formBean.randomCode']");$.label.defaults.ifRight="10px";$.label(e,rss.uc_common_validator_phone_require).label(r,rss.uc_common_input_ling_pwd).label(o,rss.please_enter_password_again).label(t,rss.plaeseinputsmscode).label(n,rss.picture_verfication_code_null_error);var a=$("#btnSubmit");var s=$("#countryCode").val();if(s.indexOf("+")>-1){s=s.replace("+","00")}if(s=="001"){validator.bind(e,{type:["require"],trim:true,validOnChange:true,msg_ct:"#msg_phone",msg:{require:rss.emptyphone,"default":rss.error},errorFunction:function(e,r){switch(r.type){case"require":showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.emptyphone);break;default:showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error);break}},successFunction:function(){hideErrorNew($("#phoneInputDiv-box"),$("#msg_phone"))},reInputFunction:function(){hideErrorNew($("#phoneInputDiv-box"),$("#msg_phone"))}})}else{validator.bind(e,{type:["require"],trim:true,validOnChange:true,msg_ct:"#msg_phone",msg:{require:rss.emptyphone,"default":rss.error},errorFunction:function(e,r){switch(r.type){case"require":showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.emptyphone);break;default:showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error);break}},successFunction:function(){hideErrorNew($("#phoneInputDiv-box"),$("#msg_phone"))},reInputFunction:function(){hideErrorNew($("#phoneInputDiv-box"),$("#msg_phone"))}})}r.blur(function(){$("#pwd_check_dialog").html("")});validator.bind(r,{type:["require","strLength","hasSpace","pwdComplexity","errorInput","pwdformat"],trim:false,validOnChange:true,min:8,max:32,msg_ct:"#msg_password",errorFunction:function(e,r){switch(r.type){case"require":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.inputpwd);break;case"strLength":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_format_2);break;case"hasSpace":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_format_1);break;case"pwdComplexity":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_format_3);break;case"errorInput":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.reducePwd_inputError_desc);break;case"pwdformat":showErrorNew($("#pwdDiv"),$("#msg_password"),rss.common_js_pwd_account_same_reverse);break}},successFunction:function(){if(o.val()){validator(o,true)}},reInputFunction:function(){hideErrorNew($("#pwdDiv"),$("#msg_password"))}});validator.bind(o,{type:["require","eq"],trim:false,validOnChange:true,compareTo:r,msg_ct:"#msg_checkPassword",msg:{require:rss.confirmpwd,eq:rss.pwdnotsame},errorFunction:function(e,r){switch(r.type){case"require":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss.confirmpwd);break;case"eq":showErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"),rss.pwdnotsame);break}},successFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))},reInputFunction:function(){hideErrorNew($("#confirmpwdDiv"),$("#msg_checkPassword"))}});validator.bind(t,{type:["require","length","int"],trim:true,validOnChange:true,max:8,min:4,msg_ct:"#msg_phoneRandomCode",msg:{"require":rss.inputsmscode,"int":rss.wrongformatsmscode,"default":rss.wrongformatsmscode},errorFunction:function(e,r){switch(r.type){case"require":showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.inputsmscode);break;case"int":showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.wrongformatsmscode);break;default:showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.wrongformatsmscode);break}},successFunction:function(){hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"))},reInputFunction:function(){hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"))}});registerPwdformatValidator($("#username"));a.bind("click",function(){if(!checkInputLegality()){return}registerAgreement(submitFun)});r.bind("keyup",function(){onPwdKeyUp4EMUI(r[0],$("#msg_password"),$("#pwdDiv"),"error-tips-EMUI5","input-error-EMUI5",true)})});function checkImgAuthCode(){var e=$("#randomCode");var r=$("#randomCodeImg");var o=$("#randomCode_msg");if(typeof e[0]!="undefined"&&e.val().length>=4){var t=e.val();var n={randomCode:t,session_code_key:"p_reg_login_websso_session_ramdom_code_key"};ajaxHandler("authCodeValidate",n,function(o){if("1"==o.isSuccess){$("#authCodeRight").addClass("poptips-yes");hideRandomCodeError();validateInput()}else{chgRandomCode(r[0],localInfo.webssoLoginSessionCode);e[0].value="";$("#authCodeRight").removeClass("poptips-yes");validateInput();switch(o.errorCode){case"10000201":{showRandomCodeError(rss.common_js_wrongcode);break}case"10000001":{showRandomCodeError(rss.error_10000001);break}case"10000004":{showRandomCodeError(rss.error_10000004);break}default:{showRandomCodeError(rss.error_10000002);break}}}},function(e){},true,"JSON")}else if(typeof e[0]!="undefined"&&e.val().length!=4){}}function chgRandomCodeForReset(){var e=$("#randomCode");var r=$("#randomCodeImg");chgRandomCode(r[0],localInfo.webssoLoginSessionCode);e.val("");$("#authCodeRight").removeClass("poptips-yes")}function validateInput(){var e=$("#randomCode").val().trim();if(e&&e.length>=4&&$("#authCodeRight").hasClass("poptips-yes")){$("#authCodeRight").attr("datavalue","true")}else{$("#authCodeRight").attr("datavalue","false")}}function showRandomCodeError(e){$("#randomCode_msg").html(e);$("#randomCode_msg").addClass("error-tips-EMUI5");$("#randomCodeDiv").addClass("input-error-EMUI5")}function hideRandomCodeError(){$("#randomCode_msg").html("");$("#randomCode_msg").removeClass("error-tips-EMUI5");$("#randomCodeDiv").removeClass("input-error-EMUI5")}function showErrorNew(e,r,o){if(e){e.addClass("input-error-EMUI5");r.html(o).addClass("error-tips-EMUI5")}else{r.html(o).addClass("errorColor")}}function hideErrorNew(e,r){e.removeClass("input-error-EMUI5");r.html("").removeClass("error-tips-EMUI5")}function hideErrorBox(e){e.removeClass("input-error-EMUI5")}function showPopError(e){showSystemError(e,rss.iKnowBtn)}function jsGetAge(e){var r=e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(r==null){return-2}var o;var t=e.split("-");var n=t[0];var a=t[1];var s=t[2];if(n==""||a==""||s==""){return-2}d=new Date;var i=d.getFullYear();var l=d.getMonth()+1;var u=d.getDate();if(i==n){if(l<a){o=-1}if(l==a&&u<s){o=-1}if(l==a&&u>=s){o=0}if(l>a){o=0}}else{var c=i-n;if(c>0){if(l==a){var h=u-s;if(h<0){o=c-1}else{o=c}}else{var f=l-a;if(f<0){o=c-1}else{o=c}}}}return o}function checkBirthday(e){var r=$("#birthDate").datePickEMUI5("Y")+"-"+$("#birthDate").datePickEMUI5("M")+"-"+$("#birthDate").datePickEMUI5("D");var o=jsGetAge(r);if(o==-2){showErrorNew($("#birthDateWrap"),$("#birthdayError"),rss.chooseDateTip);return false}if(o==-1){showErrorNew($("#birthDateWrap"),$("#birthdayError"),rss.birthdayLimitTip);return false}if(o<localInfo.ageLimit){under13GOChild();return false}else if(o<0){showErrorNew(null,$("#birthdayError"),rss.age_error);return false}return true}function under13GOChild(){var e="<div>"+rss.uc_cantcreateunder_agelimit_content.format(localInfo.ageLimit)+"</div>";$("<div>").Dialog({title:rss.uc_cantcreateunder13_title,btnLeft:false,btnRight:{text:rss.iKnowBtn,fn:function(){this.hide()}},html:e,beforeAction:function(){}}).Dialog("show");$("#websettingurl").attr("href",localInfo.createChildUrl)}function checkInputLegality(){if($("#btnSubmit").attr("class").indexOf("sel")==-1||$("#btnSubmit").hasClass("send-ajax")){return false}var e=false;$(".error-tips-EMUI5").each(function(){if($(this).text().trim().length>1){e=true}});if(e){return false}if(!validator($("#registerForm"),true)){return false}if(localInfo.isRegNeedInputAge=="true"){if(!checkBirthday(true)){return false}}var r=$("#countryCode").val();if(r.indexOf("+")>-1){r=r.replace("+","00")}var o=$("#username");if(!valiMobile(o.val())){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error);return false}if(localInfo.currentCountrySiteID!=localInfo.currentSiteID&&!warningConfirmed){notCurrentSiteWarningDialog();return}return true}function submitFun(e){checkExistAuto($("#username"),function(){regPostAction(e)})}function getbirthDate(){if(localInfo.isRegNeedInputAge=="false"){return""}var e=$("#birthDate").datePickEMUI5("Y").toString();var r=$("#birthDate").datePickEMUI5("M").toString();var o=$("#birthDate").datePickEMUI5("D").toString();if(r.length==1){r="0"+r}if(o.length==1){o="0"+o}var t=e+r+o;return t}function regPostAction(e){var r=$("#authCode").val().trim(),o=$("#password").val(),t=$("#username").val();var n="";if($("#countryCode").val().indexOf("+")>-1){n=$("#countryCode").val().replace("+","00")}else{n=$("#countryCode").val()}t=getPhoneNumber(t,n);var a=$("#countryRegion").val();var s="";var i="";if(a.split("-").length>1){s=a.split("-")[1];i=a}var l=localInfo.agreementContentsStr;if((localInfo.currentCountrySiteID=="7"||localInfo.currentCountrySiteID=="5")&&$("#adMarketChecked").is(":checked")==false){l=checkAdMarketAgreedAgrContent(l)}l=l.replace(/\$countryCode/g,i);l=l.replace(/\'/g,'"');var u="registerCloudAccount";var d={"password":o,"userAccount":t,"accountType":"2","reqClientType":localInfo.reqClientType,"registerChannel":localInfo.loginChannel,"authCode":r,"languageCode":localInfo.lang,"countryCode":s,"agrVers":l,"thirdLoginFlag":localInfo.thirdLoginFlag==""?false:localInfo.thirdLoginFlag,"birthDate":getbirthDate(),"randomCode":$("#randomCode").val()};d.operType=0;d.randomAuthCode=$("#randomCode").val();var c;if(rss.msgDialogOverlayClass){c={overlayClass:rss.msgDialogOverlayClass}}$("#btnSubmit").addClass("send-ajax");ajaxHandler(u,d,function(r){if(r.isSuccess=="1"){$("#btnSubmit").addClass("send-ajax");$("#register_msg").show().html("");var n={userAccount:t,password:o,reqClientType:localInfo.reqClientType,loginChannel:localInfo.loginChannel,authcode:r.regToken,service:htmldecode(localInfo.service),loginUrl:localInfo.loginUrl,opType:13};ajaxHandler("remoteLogin",n,function(r){if("1"==r.isSuccess){$("#btnSubmit").addClass("send-ajax");gotoUrl(r.callbackURL)}else{$("#btnSubmit").removeClass("send-ajax");showErrorByCode(r.errorCode,e)}},function(e){},false,"JSON")}else{showErrorByCode(r.errorCode,e)}},function(){},true,"json",c)}function isPastToday(e){var r=e.substring(0,4);var o=e.substring(4,6);var t=e.substring(6,8);var n=new Date(r,parseInt(o)-1,t);n.setFullYear(parseInt(r)+0);var a=n.getTime();var s=(new Date).getTime();return a>=s}function showErrorByCode(e,r){chgRandomCodeForReset();if(e=="70001201"){showPopError(rss.error_70001201)}else if(e=="70008800"){$("#randomCode").val("");$("#msg_randomCode").show().html("");showPopError(rss.error_risk_70008800);$("#authCodeRight").removeClass("poptips-yes");chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)}else if(e=="10000704"){showPopError(rss.error_70001201_1);$("#randomCode").val("");$("#randomCode").focus();$("#authCode").val("");$("#authCodeRight").removeClass("poptips-yes");chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)}else if(e=="70008001"){window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss.error_70008001)},100)}else if(e=="70002070"){window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss.error_70002070)},100)}else if(e=="10000001"){showPopError(rss.error_10000001)}else if(e=="70001401"){showPopError(rss.error_70001401)}else if(e=="70002002"){window.setTimeout(function(){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error_70002002)},100)}else if(e=="70007007"){showPopError(rss.error_70007007)}else if(e=="10000201"){$("#randomCode").val("");showRandomCodeError(rss.common_js_wrongcode);$("#authCodeRight").removeClass("poptips-yes");chgRandomCode($("#randomCodeImg")[0],localInfo.webssoLoginSessionCode)}else if(e=="70002003"){showErrorNew($("#passwordParentDiv"),$("#msg_checkPassword_parent"),rss.error_70002003)}else if(e=="70006006"){showPopError(rss.error_70006606)}else if(e=="70007003"){showPopError(rss.error_70007003)}else if(e=="70007004"){showPopError(rss.error_70007004)}else if(e=="70007001"){showPopError(rss.error_70007001)}else if(e=="70002067"){showPopError(rss.error_70002067)}else if(e=="70002033"){showPopError(rss.error_70002033)}else if(e=="70002018"){showPopError(rss.error_70002018)}else if(e=="70002057"){window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.error_70002057)},100)}else if(e=="10002073"){window.setTimeout(function(){showErrorNew($("#pwdDiv"),$("#msg_password"),rss.error_10002073)},100)}else if(e=="70002058"){showPopError(rss.error_70002058)}else if(e=="70002039"){window.setTimeout(function(){showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),rss.error_70002039)},100)}else if(e=="10000004"){showPopError(rss.error_10000004)}else if(e=="10000002"){showPopError(rss.error_10000002)}else if(e=="10000505"){showPopError(rss.error_10000505)}else{showPopError(rss.smsSendDefErr)}r.hide()}function checkExistAuto(e,r){var o=e.val();if(o.length>50||o.length<5){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss_new.login_js_accountlength);return}var t=$("#countryCode").val();if(t.indexOf("+")>-1){t=t.replace("+","00")}var n=getPhoneNumber(o,t);var a={"userAccount":n};casAjaxObj.isExsitUser(a,s,i);function s(e){var o=e.existAccountFlag;if(o=="0"){hideErrorNew($("#phoneInputDiv-box"),$("#msg_phone"));if(r){r()}}else if(o=="1"){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.phoneexist)}else{hideErrorNew($("#phoneInputDiv-box"),$("#msg_phone"))}}function i(e,r){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),e)}}function sendSMS(e,r,o){var t=$("#getValiCode");if($("#randomCode").length>0&&!validator($("#randomCode"),true)){return false}var n={10000002:rss_new.uc_error_10000001,70001201:rss_new.uc_error_10000001,10001011:rss_new.reg_input_email_authcode,70001102:rss_new.uc_error_70001102_1,70001104:rss_new.uc_error_70001104_1,"default":rss_new.resetpwd_get_authcode_error};var a=14;var s={"userAccount":e,"smsReqType":"4","reqClientType":r,"accountType":2,"siteID":localInfo.currentCountrySiteID,"languageCode":localInfo.lang,"randomAuthCode":$("#randomCode").val(),operType:a};var i;if(rss.msgDialogOverlayClass){i={overlayClass:rss.msgDialogOverlayClass}}t.attr("disabled",true);casAjaxObj.getSMSAuthCode(s,l,u,n);function l(){hideErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"));showMsgSuccess({obj:$("#msg_getPhoneRandomCode"),msg:rss.smsHasSendTo.format(getExpressPhone(s.userAccount)),leftPix:"-255px",rightPix:"-255px",bottom:"63px"});t.attr("IntervalTime",60);t.attr("disabled",true);t.addClass("auth_code_grey");jsInnerTimeout($("#getValiCode"),rss.resend,true,true)}function u(e,r){t.removeAttr("disabled",true);var o=r.errorCode;if("10000201"==o){showRandomCodeError(e);chgRandomCodeForReset()}else{showErrorNew($("#errRandomCode-box"),$("#msg_phoneRandomCode"),e)}}}function listToDropListCountry(e){var r=[];if(e){$.each(e,function(e,o){var t={value:o.siteID+"-"+o.regionID,label:o.mulitLangRegion};r.push(t)})}return r}function getCountryRegion(){var e={"lang":localInfo.lang,"reqClientType":localInfo.reqClientType};if(localInfo.thirdLoginFlag=="true"||localInfo.isQuickReg=="true"){e.thirdLoginFlag="true"}var r="getCountryRegion";ajaxHandler(r,e,function(e){if(e.isSuccess=="1"){countryRegions=e.countryRegions;showCountryRegions=listToDropListCountry(countryRegions)}},function(){},false,"JSON");var o="";o=localInfo.currentCountrySiteID+"-"+localInfo.currentCountryCode;$("#selectCountryImg").DropListEMUI5({items:showCountryRegions,defaultValue:o,onChange:function(e,r){var o=e.split("-");localInfo.currentCountrySiteID=o[0];localInfo.currentCountryCode=o[1];var t=o[0]!="7";if(o[0]!=localInfo.currentSiteID&&!warningConfirmed){isCurrentSite=false}var n={lang:localInfo.lang,siteID:o[0]};ajaxHandler("getCountryCallingCode",n,function(e){if(e.isSuccess){changeInputCountryCode(e.countryCallingCodeList);displayCountry()}else{return}});$("#selectedCountry").text(r);$("#regXCountry").text(rss.now_register_x_account.format(r));var a=e;$("#selectCountryCodeDiv").html("");getAgreementContent(a.split("-")[1]);$("#countryRegion").val(a);displayAgreeTwoByCD(a.split("-")[1])}})}function displayCountry(){var e=localInfo.currentCountryCode;var r=getIPCountry();var o=getdefaultCountryByCurrentSiteID();var t=o.split("-")[1];var n="";if(countryRegions.length>0){var a=false;if(e){$.each(countryRegions,function(r,o){if(e.toLowerCase()==o.regionID){$("#selectedCountry").text(o.mulitLangRegion);$("#regXCountry").text(rss.now_register_x_account.format(o.mulitLangRegion));a=true;n=o.siteID+"-"+o.regionID;replaceAgreeAge(o.ageLimit);return false}})}if(r&&!a){$.each(countryRegions,function(e,o){if(r.toLowerCase()==o.regionID){$("#selectedCountry").text(o.mulitLangRegion);$("#regXCountry").text(rss.now_register_x_account.format(o.mulitLangRegion));a=true;n=localInfo.currentSiteID+"-"+o.regionID;replaceAgreeAge(o.ageLimit);return false}})}if(t&&!a){$.each(countryRegions,function(e,r){if(t.toLowerCase()==r.regionID){$("#selectedCountry").text(r.mulitLangRegion);$("#regXCountry").text(rss.now_register_x_account.format(r.mulitLangRegion));a=true;n=o;replaceAgreeAge(r.ageLimit);return false}})}}$("#countryRegion").val(n);if(countryRegions.length>=1){$("#chooseCountry").css("display","");$("#chooseCountryShadow").css("display","")}}function getIPCountry(){var e="";var r={"reqClientType":localInfo.reqClientType};var o="getIPCountry";ajaxHandler(o,r,function(r){if(r.isSuccess=="1"){if(r.countryCode!=""){e=localInfo.currentSiteID+"-"+r.countryCode}}},function(){},false,"JSON");return e}function changeInputCountryCode(e){var r=[];var o="";o=localInfo.currentCountryCode;if(e){$.each(e,function(e,t){var n=t.split("(");var a=n[0];var s=t.split("|")[0];var i=t.split("|")[1];a=a.replace("+","00");if(i==o){localInfo.default_country_code=a}if(a){var l={value:a,label:s};r.push(l)}})}$("#countryCode").val(localInfo.default_country_code);$("#input_languageCode").DropListEMUI5({items:r,defaultValue:localInfo.default_country_code,onChange:function(e,r){var o=r.split("(");if(o.length>1){$("#countryCode").val(o[0]);var t=$("#username").val();if(t!=""){if(!valiMobile(t)){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error);return}}}}});$("#countryCode").val($("#input_languageCode").children("input").val())}function changeCountryLocation(e){var r=/countryCode=([a-zA-Z]{2})/.exec(window.location.href)[1];var o="",t="";if(e.length>0){for(var n=0;n<e.length;n++){if(e[n].regionID==r){o=e[n].mulitLangRegion;t=e[n].siteID;break}}}$("#selectedCountry").text(o);$("#countryRegion").val(t+"-"+r)}function notCurrentSiteWarningDialog(){var e='<div style="line-height:1.5">'+rss.notCurrentSiteWarning+"</div>";$("<div/>").Dialog({title:rss_new.uc_common_hint,btnLeft:false,btnRight:{text:rss.iKnowBtn,fn:function(){warningConfirmed=true;if(!checkInputLegality()){return}registerAgreement(submitFun);this.hide()}},html:e,dialogStyle:localInfo.msgDialogStyle,beforeAction:function(){}}).Dialog("show")}function displayAgreeTwoByCD(e){if(countryRegions.length>0){$.each(countryRegions,function(r,o){if(e.toLowerCase()==o.regionID){replaceAgreeAge(o.ageLimit)}})}}function getAgreementContent(e){var r=[];var o={"reqClientType":localInfo.reqClientType,"lang":localInfo.lang,"countryCode":e,"operType":0};var t="getAgreementContent";ajaxHandler(t,o,function(e){if(e.isSuccess=="1"){localInfo.agreementContentsStr=e.agreeForReg;localInfo.agreementContents=e.agreementContents;localInfo.ageLimit=e.ageLimit;localInfo.isRegNeedInputAge=e.isRegNeedInputAge;if(localInfo.isRegNeedInputAge=="true"){showBirthDateBox();initInputContent()}else{hideBirthDateBox()}regFootLinkUpdate(e.countrySiteID,e.countrySpecial,e.privacyPolicyUrl,e.huaweiIDAgrUrl)}},function(){},true,"JSON")}function getMobileCode(e,r,o,t){var n=$("#username").val();if(n==""){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.phoneemptyfail);return}if(!valiMobile(n)){showErrorNew($("#phoneInputDiv-box"),$("#msg_phone"),rss.error);return}var a=$("#countryCode").val();if(a.indexOf("+")>-1){a=a.replace("+","00")}$("#msg_phone").html("");$("#msg_phoneRandomCode").html("");$("#register_msg").html("");var s=$("#username");checkExistAuto(s,function(){sendSMS(getPhoneNumber(n,a),o,t)})}function replaceAgreeAge(e){if(e>0){$("#clickAgree").text(rss.common_agree_two_age.format(e))}else{$("#clickAgree").text(rss.common_agree_two)}}function initInputContent(){var e=0;var r=0;if(!navigator.userAgent.match(/Chrome/)&&navigator.userAgent.match(/Safari/)&&localInfo.lang=="zh-cn"){$(".input-container .input-left").each(function(){if($(this).parent().attr("id")=="phoneInputDiv-box")return;var e=$(this).text();e=e.split("").join(" ");$(this).text(e)})}$(".input-container .input-left").each(function(){var o=$(this).width();var t=$(this).outerWidth();if(e<o){e=o}if(r<t){r=t}});var o=$(".input-container").outerWidth();var t=o-r;if(isRightLang(localInfo.lang)){$("#chooseCountry .input-content,.input-content.birthDateContent").css("margin-right",r+"px")}else{$("#chooseCountry .input-content,.input-content.birthDateContent").css("margin-left",r+"px")}if(!(localInfo.lang=="zh-cn"||localInfo.lang=="zh-tw"||localInfo.lang=="zh-hk"||localInfo.lang=="en-us")){$(".input-container .input-left").width(e+1)}}function showBirthDateBox(){var e='<div class="input-container input-birthday" id="birthDateWrap">';e+='<div class="l input-left">'+rss_new.personal_info_birthday+"</div>";e+='<div class="input-content birthDateContent">';e+='<div id="birthDate" class="birthday-choose l"></div>';e+="</div>";e+="</div>";e+='<div id="birthdayError"></div>';$("#birthDateBox").html(e);showBirthDayDropBox()}function hideBirthDateBox(){$("#birthDateBox").html("")}