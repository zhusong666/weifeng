(function(e){if(typeof define=="function"&&define.amd){define(["jquery"],e)}else{e($)}})(function(e){e.fn.validator=function(e){switch(e){case"bind":{validator.bind(this,arguments[1]);break}case"register":{validator.register(arguments[1],arguments[2]);break}case"get":{return validator.get(arguments[1])}default:{break}}};var r=function(){var r=r||e;var t=function(e,r){},a=function(e,r){},n={trim:true,validOnChange:false,validOnKeyup:true,allowEmpty:true,async:true,errorClass:null,errorClassEMUI5:null,errorBoder:null,successFunction:null,errorFunction:null,reInputFunction:null};var i={};var u={};var s=function(e,a,n,i,s,f,l){r.extend(f,n);if(i){s=u[i];if(!s){t(i+" rule is undefined!");return true}}var o;if(i){f.type=i}if(s.length==3){o=s(e,a,f)}else{o=s(e,f)}if(!o){if(f.errorFunction){var c=function(){if(n.errorClass&&a){a.addClass(n.errorClass)}if(n.errorClassEMUI5&&a){n.errorBorder.addClass(n.errorClassEMUI5)}!l&&f.errorFunction(a||e,f)};if(n.async){setTimeout(c,1)}else{c()}}return false}return true};var f=function(e,r,t,a,n){if(!t.type){if(!s(e,r,t,null,t.rule,a,n)){return false}}else{var i=t.type;if(typeof t.type=="string"){i=[t.type]}var u={};for(var f=0;f<i.length;f++){if(!u[i[f]]){if(!s(e,r,t,i[f],null,a,n)){return false}u[i[f]]=1}}}return true};var l=function(r,t){var a=r.attr("validator");if(!a){return true}var n=i[a];var u;switch(r.get(0).tagName){case"SELECT":u=r.val();break;default:u=r[0].value}var s={};var l=[];for(var o=0;o<n.length;o++){var c={};if(n[o].trim){u=e.trim(u).removeAllSpace()}if(!f(u,r,n[o],c,t)){return false}l.push(c)}for(var o=0;o<n.length;o++){var g=n[o];if(g.successFunction){var p=l[o];var v=function(){if(g.errorClass&&r){r.removeClass(g.errorClass)}g.successFunction(r||u,p)};if(g.async){v()}else{v()}}}return true};var o=function(e,t,a){if(typeof t=="object"){var n={};if(f(e,null,t,n)&&t.successFunction){if(t.async){setTimeout(function(){t.successFunction(e,n)},1)}else{t.successFunction(e,n)}}return}var i=e,u=t;var s=r(i);var o=s.get(0).tagName;u=typeof u=="boolean"?u:true;switch(o){case"SELECT":case"INPUT":case"TEXTAREA":return l(s)}var c=s.find("select[validator],input[validator],textarea[validator]");var g=true;for(var p=0;p<c.length;p++){if(!l(r(c[p]),a)&&r(c[p]).is(":visible")){if(u){return false}else{g=false}}}return g};o.register=function(e,r){u[e]=r};o.get=function(e){return u[e]};var c=0;o.bind=function(t,a){var u=[];var s=r(t);a=r.extend({},n,a);s.keyup(function(){a.reInputFunction&&a.reInputFunction()});if(a.validOnChange){s.blur(function(){if(this.value!="")o(this,true)})}if(a.validOnKeyup){s.keyup(function(){e(this).removeClass(n.errorClass);a.errorBorder&&a.errorBorder.removeClass(a.errorClassEMUI5)})}for(var f=0;f<s.length;f++){var l=r(s[f]);var g=l.attr("validator");if(!g){g="validator"+ ++c+(new Date).getTime();l.attr("validator",g)}if(!i[g]){i[g]=[]}i[g].push(a);u.push(g)}return u};o.defaults=n;e.extend(o.defaults,{errorClass:"cas_error",autoFocus:false,errorFunction:function(r,t){var a="cas_error",n=t.msg[t.type]||t.msg["default"];switch(t.type){case"require":a="cas_warn";break}e(t.msg_ct).html(n);if(t.autoFocus)r.focus();window.setTimeout(function(){},2e3)},successFunction:function(e,r){}});var g=o,p=function(e,r){return!e};g.register("regex",function(e,r){if(r.allowEmpty&&p(e)){return true}if(!r.regex){a("regex","need parameter of 'regex'!");return false}return r.regex.test(e)});g.register("require",function(e,r){r.allowEmpty=false;return!p(e)});g.register("email",function(e,r){if(r.allowEmpty&&p(e)){return true}var t=null;if(r.separater){t=r.separater}var a=phoneRegex.email;var n=new RegExp(a);var i;if(t){i=e.split(t)}else{i=[e]}for(var u=0;u<i.length;u++){if(i[u].match(n)==null){return false}}return true});g.register("mobile",function(e,r){if(r.allowEmpty&&p(e)){return true}return/^[0-9]{5,15}$/.test(e)?true:false});g.register("password",function(e,r){if(r.allowEmpty&&p(e)){return true}var t=/^(?=.{8,32})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/;var a=/[^0-9a-zA-Z`~!@#$%^&*-_=+,.|\\/;:'"'()\[\]{}<>]+/;return t.test(e)&&!a.test(e)?true:false});g.register("nickname",function(e,r){if(r.allowEmpty&&p(e)){return true}return/^([^\u4E00-\u9FA5])*$/.test(e)?true:false});g.register("numeric",function(e,r){if(r.allowEmpty&&p(e)){return true}return/^\d+$/.test(e)?true:false});g.register("eq",function(e,t){if(!t.compareTo){a("eq","need parameter of 'compareTo'!");return false}var n=r(t.compareTo).val();if(!t.format){return e==n}var i=g.get("date");if(!(i(e,t)&&i(n,t))){return false}return e.parseDate(t.format).getTime()==n.parseDate(t.format).getTime()});g.register("lt",function(e,t){if(t.allowEmpty&&p(e)){return true}if(!t.compareTo){a("lt","need parameter of 'compareTo'!");return false}var n=r(t.compareTo).val();if(!t.format){t.negative=true;var i=g.get("float");if(!i(e,t)){return false}if(!i(n,t)){return false}e=parseFloat(e);n=parseFloat(n);return e<n}var u=g.get("date");if(!(u(e,t)&&u(n,t))){return false}return e.parseDate(t.format)<n.parseDate(t.format)});g.register("le",function(e,r){var t=g.get("eq");var a=g.get("lt");return t(e,r)||a(e,r)});g.register("gt",function(e,t){if(t.allowEmpty&&p(e)){return true}if(!t.compareTo){a("gt","need parameter of 'compareTo'!");return false}var n=r(t.compareTo).val();if(!t.format){t.negative=true;var i=g.get("float");if(!i(e,t)){return false}if(!i(n,t)){return false}e=parseFloat(e);n=parseFloat(n);return e>n}var u=g.get("date");if(!(u(e,t)&&u(n,t))){return false}return e.parseDate(t.format)>n.parseDate(t.format)});g.register("ge",function(e,r){var t=g.get("eq");var a=g.get("gt");return t(e,r)||a(e,r)});g.register("length",function(e,r){if(r.allowEmpty&&p(e)){return true}if(!(r.min||r.max)){a("length","need parameter of 'min' or 'max'!");return false}var t=e.len();if(r.min&&t<r.min){return false}if(r.max&&t>r.max){return false}return true});g.register("strLength",function(e,r){if(r.allowEmpty&&p(e)){return true}if(!(r.min||r.max)){a("length","need parameter of 'min' or 'max'!");return false}var t=e.length;if(r.min&&t<r.min){return false}if(r.max&&t>r.max){return false}return true});g.register("range",function(e,r){if(r.allowEmpty&&p(e)){return true}if(!(r.min||r.max)){a("range","need parameter of 'min' or 'max'!");return false}r.negative=true;var t=g.get("float");if(!t(e,r)){return false}var n=parseFloat(e);if(r.min&&n<r.min){return false}if(r.max&&n>r.max){return false}return true});g.register("chinese",function(e,r){if(r.allowEmpty&&p(e)){return true}r.regex=/^[\u4E00-\u9FA5]$/;return g.get("regex")(e,r)});g.register("int",function(e,r){if(r.allowEmpty&&p(e)){return true}if(r.negative){r.regex=/^[-]?\d+$/}else{r.regex=/^\d+$/}return g.get("regex")(e,r)});g.register("float",function(e,r){if(r.allowEmpty&&p(e)){return true}if(r.negative){r.regex=/^[-]?\d+(\.\d+)?$/}else{r.regex=/^\d+(\.\d+)?$/}return g.get("regex")(e,r)});g.register("date",function(e,r){if(r.allowEmpty&&p(e)){return true}if(!r.format){t("date","need parameter of 'format'!");return false}var a={"\\.":"\\.","M+":"(0[1-9]|[1-9]|1[0-2])","d+":"(0[1-9]|[1-9]|[12][0-9]|3[01])","y+":"(\\d{4})","H+":"([0-9]|[01][0-9]|2[0-3])","m+":"([0-9]|[0-5][0-9])","s+":"([0-9]|[0-5][0-9])",S:"(\\d+)"};var n=r.format;for(var i in a){if(new RegExp("("+i+")").test(r.format)){n=n.replace(RegExp.$1,a[i])}}r.regex=new RegExp("^"+n+"$");if(!g.get("regex")(e,r)){return false}return e==e.parseDate(r.format).format(r.format)});g.register("url",function(e,r){if(r.allowEmpty&&p(e)){return true}if(e.startWith("http://")){e=e.substring(7)}else{if(e.startWith("https://")){e=e.substring(8)}else{if(r.requireProtocol){return false}}}if(!e){return false}r.regex=/^[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/;return g.get("regex")(e,r)});g.register("idCard",function(e,r){if(r.allowEmpty&&p(e)){return true}var t=/^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$/;return t.test(e)?true:false});g.register("phoneNumber",function(r,t){var a=e("#input_languageCode > input").val()||"";var n="";r=r.replace("+","00");if(r.startsWith(a)){r=r.substring(a.length,r.length)}else if(r.startsWith("00")){return false}if(a&&a=="0086"){n=phoneRegex.chinesePhone}else if(a=="001"||a=="+1"){n=phoneRegex.USAPhone}else{n=phoneRegex.anyPhone}return n.test(r)?true:false});g.register("chinaLang",function(e,r){if(r.allowEmpty&&(e==null||e=="")){return true}if(e.length!=4){return false}else{return true}});return o};window.validator=window.validator||r()});String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"aa").length};(function(){var e=0;$.label=function(r,t,a){if(!t){return $}var n=jQuery;a=n.extend({},$.label.defaults,a);n(r).each(function(){var r=n(this),i=r.attr("id"),u=Number(r.css("z-index"))||1,s=parseInt(r.css("margin-top"),10)+parseInt(r.css("border-top-width"),10),f=parseInt(r.css("margin-left"),10)+parseInt(r.css("border-left-width"),10),l=n('<label class="lb_opacity_Class" style="display:none;position:absolute;cursor:text;'+a.ifLeft+"float:left;z-index:"+(u+1)+'"></label>'),o=n('<div style="border:none;background:transparent;cursor:text;margin:2px;width:'+r[0].style.width+';" tabindex=-1>'+t+"</div>").attr("class",r.attr("class"));r.parent().find(".lb_opacity_Class").remove();if(a.ifRight!=""){s=a.ifRight}if(!i&&a.autoId){i="input_label_"+e++;r.attr("id",i)}l.attr("for",i);var c={color:a.color};o.css(c);o[0].defaultValue=t;l.css({"padding-left":f,"padding-top":s}).append(o);r.css("z-index",u).before(l);var g=r.parents("form");if(g.length>0){g.bind("reset",function(){setTimeout(function(){p()},150)})}var p=function(){if(r.prop("value").length==0){l.css("display","block")}},v=function(){l.css("display","none")},d=function(){if(r.prop("value").length!=0){l.css("display","none")}},m=function(e){if(e.keyCode==8&&r.prop("value").length==0){if(e.returnValue){e.returnValue=false}if(e.preventDefault){e.preventDefault()}}l.css("display","none");r.focus()};r.bind("focus",d).bind("blur",p);l.bind("keydown",m);var h=$(document).filter(":focus");if(h!=r[0]){p()}var y=setInterval(function(){if(r.prop("value").length!=0){l.css("display","none")}},100)});return $};$.label.defaults={color:"#ccc",autoId:true,ifLeft:"",ifRight:""}})();