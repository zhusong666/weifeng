ec.pkg("ec.address");ec.load("ajax");ec.load("ec.dh");ec.load("ec.aes");var _defaultAddress="\u9009\u62e9\u7701-\u5e02-\u533a-\u8857\u9053";var _defaultTimeOut=10000;var address=[];var tree_url=domainShoppingConfig+"/data/region/tree/{id}.json";var children_url=domainShoppingConfig+"/data/region/children/{id}.json";var _tempAddress={};var _tempAddressIds={};var addressConfig=null;var cache={},ajaxer;var timeoutId;ec.address.processType="0";ec.address.parseUrl=function(a,b){return a.replace(/{id}/g,b)};ec.address.processAddress=function(){var j=$("#current-address").text();var e="0";if(j==_defaultAddress){_tempAddressIds={};_tempAddress={}}var i=ec.address.getFormProcessType(ec.address.processType);$("#provice").removeClass("current");$("#city").removeClass("current");$("#district").removeClass("current");$("#street").removeClass("current");$("#provice").show();$("#city").show();$("#district").show();$("#street").hide();_tempAddressIds[0]=$("#provice").attr("data-value");_tempAddressIds[1]=$("#city").attr("data-value");_tempAddressIds[2]=$("#district").attr("data-value");_tempAddressIds[3]=$("#street").attr("data-value");_tempAddress[0]=$("#provice").html();_tempAddress[1]=$("#city").html();_tempAddress[2]=$("#district").html();_tempAddress[3]=$("#street").html();var b=_tempAddress[0],d=_tempAddress[1],k=_tempAddress[2],a=_tempAddress[3];var h=_tempAddressIds[0],g=_tempAddressIds[1],c=_tempAddressIds[2],f=_tempAddressIds[3];if(!h){addrType=1}else{if(!g){addrType=1}else{if(!c){addrType=2}else{if(!f){addrType=3}else{addrType=4}}}}switch(addrType){case 4:$("#street").text(ec.address.replaceChar(a));$("#street").show();case 3:$("#district").text(ec.address.replaceChar(k));case 2:$("#city").text(d);case 0:case 1:$("#provice").text(b)}switch(addrType){case 4:e=$("#district").attr("data-value");$("#street").addClass("current");break;case 3:e=$("#city").attr("data-value");$("#district").addClass("current");break;case 2:e=$("#provice").attr("data-value");$("#city").addClass("current");break;case 1:$("#provice").addClass("current");e="0";break}$("#provice_info").find("a").bind("click",ec.address.againSelectAddress);if(addrType<=1){ec.address.queryData(ec.address.parseUrl(tree_url,"0"),true,1,ec.address.queryProvince)}else{ec.address.queryData(ec.address.parseUrl(children_url,e),true,addrType,ec.address.queryProvince)}};ec.address.againSelectAddress=function(){var d=$(this).attr("data-value");var c=parseInt(d);var b=parseInt($(this).attr("level-value"));if((d==null||d=="")&&b!=1){return}if($.trim($(this).text())=="\u8bf7\u9009\u62e9"){return}var a=ec.address.getFormProcessType(ec.address.processType);$("#provice").show();$("#city").show();$("#district").show();$("#street").hide();$(".form-address-name-tab").find("a:not(#street)").removeClass();switch(b){case 1:$("#provice").addClass("current");$("#city").text("\u8bf7\u9009\u62e9");$("#district").text("\u8bf7\u9009\u62e9");$("#street").text("\u8bf7\u9009\u62e9");_tempAddressIds[1]="";_tempAddressIds[2]="";_tempAddressIds[3]="";_tempAddress[1]="";_tempAddress[2]="";_tempAddress[3]="";c="0";$(a).find("input[name=city]").attr("value","");$(a).find("input[name=district]").attr("value","");$(a).find("input[name=street]").attr("value","");$("#city").attr("data-value","");$("#district").attr("data-value","");$("#street").attr("data-value","");break;case 2:$("#city").addClass("current");$("#district").text("\u8bf7\u9009\u62e9");$("#street").text("\u8bf7\u9009\u62e9");_tempAddressIds[2]="";_tempAddressIds[3]="";_tempAddress[2]="";_tempAddress[3]="";c=$("#provice").attr("data-value");$(a).find("input[name=district]").attr("value","");$(a).find("input[name=street]").attr("value","");$("#district").attr("data-value","");$("#street").attr("data-value","");break;case 3:$("#district").addClass("current");$("#street").text("\u8bf7\u9009\u62e9");$("#street").show();_tempAddressIds[3]="";_tempAddress[3]="";c=$("#city").attr("data-value");$(a).find("input[name=street]").attr("value","");$("#street").attr("data-value","");break;case 4:$("#street").addClass("current");c=$("#district").attr("data-value");break}if(b==1){ec.address.queryData(ec.address.parseUrl(tree_url,"0"),true,1,ec.address.queryProvince)}else{ec.address.queryData(ec.address.parseUrl(children_url,c),true,b,ec.address.queryProvince)}};ec.address.changeAddress=function(){var d=$(this).attr("id");var a=ec.address.replaceChar($(this).text());var c=parseInt($(this).attr("addrType"));$(".form-address-name-tab").find("a:not(#street)").removeClass();var b=ec.address.getFormProcessType(ec.address.processType);$("#provice").show();$("#city").show();$("#district").show();$("#street").hide();switch(c){case 1:$("#provice").text(a);$("#provice").attr("data-value",d);$("#city").addClass("current");$("#city").attr("data-value","");$("#district").attr("data-value","");$("#street").attr("data-value","");$("#city").text("\u8bf7\u9009\u62e9");$("#district").text("\u8bf7\u9009\u62e9");$("#street").text("\u8bf7\u9009\u62e9");$(b).find("input[name=province]").attr("value",d);_tempAddress[0]=$(this).text();_tempAddressIds[0]=d;break;case 2:$("#city").text(a);$("#city").attr("data-value",d);$("#district").addClass("current");$("#district").attr("data-value","");$("#street").attr("data-value","");$("#district").text("\u8bf7\u9009\u62e9");$("#street").text("\u8bf7\u9009\u62e9");$(b).find("input[name=city]").attr("value",d);_tempAddress[1]=$(this).text();_tempAddressIds[1]=d;break;case 3:$("#district").text(a);$("#district").attr("data-value",d);$("#street").addClass("current");$("#street").attr("data-value","");$("#street").text("\u8bf7\u9009\u62e9");$("#street").show();$(b).find("input[name=district]").attr("value",d);_tempAddress[2]=$(this).text();_tempAddressIds[2]=d;break;case 4:$("#street").text(a);$("#street").attr("data-value",d);$("#street").addClass("current");$("#street").show();$(b).find("input[name=street]").attr("value",d);$("#address-tab").hide();_tempAddress[3]=$(this).text();_tempAddressIds[3]=d;break}if(c<4){ec.address.queryData(ec.address.parseUrl(children_url,d),true,c+1,ec.address.queryProvince)}else{if(_tempAddress!=null&&_tempAddressIds!=null){ec.address.showAddress(_tempAddress)}}};ec.address.queryProvince=function(f,g){var c;if(g==1){c=f.data[0]}else{c=f.data}var e=[];var a=c.length;if(a>0){if(g>=4){$("#street").show()}else{$("#street").removeClass("current");$("#street").text("\u8bf7\u9009\u62e9")}e.push('<ul class="clearfix">');var d=0;for(var b=0;b<a;b++){var h=ec.address.replaceChar(c[b].name);e.push('<li id="'+c[b].id+'" addrType="'+g+'"><a href="javascript:;">'+h+"</a></li>")}e.push("</ul>");$("#address_table").css({"min-height":"180px"}).html(e.join(""));$("#address_table").find("li").bind("click",ec.address.changeAddress);$("#address-tab").show()}else{if(g==4){$("#street").hide();$("#district").addClass("current");var j=ec.address.getFormProcessType(ec.address.processType);$(j).find("input[name=needL4Addr]").attr("value",false);ec.address.showAddress(_tempAddress)}}};ec.address.queryData=function(a,c,d,e){var b;if(c&&(b=cache[a])){return e(b,d)}if(ajaxer){ajaxer.abort()}ajaxer=$.ajax({url:a,type:"get",dataType:"jsonp",success:function(f){if(c){cache[a]=f}e(f,d)},error:function(g,f){logger.warn("load data fail.")}})};ec.address.getCitydistrict=function(f){_tempAddress={};var k=f.values;var a="";var h=ec.address.getFormProcessType(ec.address.processType);var b=f.data[0];for(var d=0;d<b.length;d++){var j=b[d];if(j.id==k[0]){_tempAddress[0]=j.name;$(h).find("input[name=province]").attr("value",j.id);$(h).find("input[name=provinceG]").attr("value",j.id);$("#provice").text(j.name);a="provice";break}}var c=f.data[1];for(var d=0;d<c.length;d++){var j=c[d];if(j.id==k[1]){_tempAddress[1]=j.name;$(h).find("input[name=city]").attr("value",j.id);$(h).find("input[name=cityG]").attr("value",j.id);a="city";$("#city").text(j.name);break}}var g=f.data[2];for(var d=0;d<g.length;d++){var j=g[d];if(j.id==k[2]){_tempAddress[2]=j.name;$(h).find("input[name=district]").attr("value",j.id);$(h).find("input[name=districtG]").attr("value",j.id);a="district";$("#district").text(j.name);break}}var e=f.data[3];if($.trim(e)!=""&&e!=undefined){for(var d=0;d<e.length;d++){var j=e[d];if(j.id==k[3]){_tempAddress[3]=j.name;$(h).find("input[name=street]").attr("value",j.id);$(h).find("input[name=streetG]").attr("value",j.id);a="street";$("#street").text(j.name);break}}}$("#"+a).addClass("current").siblings().removeClass("current");ec.address.showAddress(_tempAddress)};ec.address.getAddressIdCallBack=function(b){var a=b.districtId;if($.trim(a)==""){ec.address.hiddenTips();return}ec.address.showAddress(_tempAddress)};ec.address.showAddress=function(a){$("#current-address").addClass("form-address-detailcon");var b=a[0]+"-"+a[1]+"-"+ec.address.replaceChar(a[2]);var d=ec.address.replaceChar(a[3]);if($.trim(d)!=""&&$.trim(d)!="\u8bf7\u9009\u62e9"&&d!=undefined){b+="-"+d}$("#current-address").html(b);ec.address.hiddenTips();$("#myAddress-msg").hide();$("#myAddress-msg").removeClass();$("#select-address-msg").html("");var c=ec.address.getFormProcessType(ec.address.processType);if(ec.address.validateAddressOncal==1){ec.member.exchange.getExpress($(c).find("input[name=province]").attr("value"),$(c).find("input[name=city]").attr("value"),$(c).find("input[name=district]").attr("value"),$(c).find("input[name=street]").attr("value"),function(e){if(!e.success||(e.success&&e.carriers.indexOf(2)<0)){ec.member.exchange.globalNullTips("\u8be5\u5730\u5740\u6682\u65f6\u65e0\u6cd5\u652f\u6301\u4e0a\u95e8\u53d6\u8d27\uff0c\u8bf7\u9009\u62e9\u81ea\u5bc4\u65b9\u5f0f\u8fdb\u884c\u9000\u6362\u8d27\u5904\u7406\u3002",function(){ec.member.exchange.autoSelect();ec.address.reset();$("#current-address").html("\u9009\u62e9\u7701-\u5e02-\u533a-\u8857\u9053").removeClass("form-address-detailcon");$("input[name='address']").val("")});return false}},function(){ec.member.exchange.globalNullTips("\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01",function(){ec.address.reset();$("#current-address").html("\u9009\u62e9\u7701-\u5e02-\u533a-\u8857\u9053").removeClass("form-address-detailcon");$("input[name='address']").val("")});return false})}$(c).find("input[name=provinceG]").attr("value",$(c).find("input[name=province]").attr("value"));$(c).find("input[name=cityG]").attr("value",$(c).find("input[name=city]").attr("value"));$(c).find("input[name=districtG]").attr("value",$(c).find("input[name=district]").attr("value"));$(c).find("input[name=streetG]").attr("value",$(c).find("input[name=street]").attr("value"));$(c).find("input[name=needL4AddrG]").attr("value",$(c).find("input[name=needL4Addr]").attr("value"))};ec.address.hiddenTips=function(){$("#address-search").hide();$("#address-tab").hide()};ec.address.setDefaultAddress=function(){$("#current-address").html(_defaultAddress)};ec.address.change=function(a){switch(a){case 1:$("#address-tab").hide();$("#address-search").show();break;case 2:$("#address-tab").show();if($("#gouldAddress").val()==1){ec.address.processAddress()}$("#address-search").hide();break}};ec.address.oSearchSuggest=function(c){var a=$("#address-search input");var d=$(".form-address-search-list");var b="";var e=function(){a.bind("keyup",ec.address.sendKeyWord)};ec.address.sendKeyWord=function(i){if(d.css("display")=="block"&&i.keyCode==38||i.keyCode==40){var j=d.find("li p.hover");if(i.keyCode==38){if(j.length>0){var l=j.removeClass("hover").prev();if(l.length>0){l.addClass("hover");a.val(l.html())}}else{var h=d.find("li p:last");h.addClass("hover");a.val(h.html())}}else{if(i.keyCode==40){if(j.length>0){var g=j.removeClass("hover").next();if(g.length>0){g.addClass("hover");a.val(g.html())}}else{var k=d.find("li p:first");k.addClass("hover");a.val(k.html())}}}}else{var f=$.trim(a.val());if(f==""||f==b){$("#form-address-no").hide();return}clearTimeout(timeoutId);timeoutId=setTimeout(function(){c(f)},300);b=f}};this.dataDisplay=function(f){if(f.length<=0){d.hide();return}d.find("li p").hover(function(){$(this).parent().find("span").show();d.find("li").removeClass("hover");$(this).find("li").addClass("hover");a.val(this.innerHTML)},function(){$(this).removeClass("hover");$(this).parent().find("span").hide()}).bind("click",function(){a.val(this.innerHTML);d.hide()})};e()};ec.address.location=function(d,e){var a=e;var c={location:e};$.ajax({type:"GET",url:domainShoppingConfig+"/data/getRegionInfoByLocation.json",async:false,data:c,dataType:"jsonp",success:function(f){if($.trim(f)!=""&&f!=undefined){b(d,f);$("#address-search").hide()}else{$("#form-address-no").show()}}});function b(h,i){$("#form-address-no").hide();if(i.success){var j=ec.address.getFormProcessType(ec.address.processType);if(($.trim(i.provinceId)!=""&&i.provinceId!=undefined)&&($.trim(i.cityId)!=""&&i.cityId!=undefined)&&($.trim(i.districtId)!=""&&i.districtId!=undefined)&&((i.needL4Addr!="")&&(i.needL4Addr))){var k=ec.address.replaceChar(i.streetName);if($.trim(k)!=""&&k!=undefined){if(ec.address.validateAddressOncal==1){ec.member.exchange.getExpress(i.provinceId,i.cityId,i.districtId,i.streetId,function(l){if(!l.success||(l.success&&l.carriers.indexOf(2)<0)){ec.member.exchange.globalNullTips("\u8be5\u5730\u5740\u6682\u65f6\u65e0\u6cd5\u652f\u6301\u4e0a\u95e8\u53d6\u8d27\uff0c\u8bf7\u9009\u62e9\u81ea\u5bc4\u65b9\u5f0f\u8fdb\u884c\u9000\u6362\u8d27\u5904\u7406\u3002",function(){ec.member.exchange.autoSelect();ec.address.reset();$("#current-address").html("\u9009\u62e9\u7701-\u5e02-\u533a-\u8857\u9053").removeClass("form-address-detailcon");$("input[name='address']").val("")});return false}},function(){ec.member.exchange.globalNullTips("\u64cd\u4f5c\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5\uff01",function(){ec.address.reset();$("#current-address").html("\u9009\u62e9\u7701-\u5e02-\u533a-\u8857\u9053").removeClass("form-address-detailcon");$("input[name='address']").val("")});return false})}$("#current-address").empty();$("#current-address").addClass("form-address-detailcon");$(j).find("input[name=province]").attr("value",i.provinceId);$(j).find("input[name=city]").attr("value",i.cityId);$(j).find("input[name=district]").attr("value",i.districtId);$("#provice").attr("data-value",i.provinceId);$("#city").attr("data-value",i.cityId);$("#district").attr("data-value",i.districtId);$("#provice").text(i.provinceName);$("#city").text(i.cityName);$("#district").text(ec.address.replaceChar(i.districtName));var g=i.provinceName+"-"+i.cityName+"-"+ec.address.replaceChar(i.districtName)+"-"+k;$(j).find("input[name=street]").attr("value",i.streetId);$("#street").attr("data-value",i.streetId);$("#street").text(k);$(j).find("input[name=needL4Addr]").attr("value",i.needL4Addr);$(j).find("input[name=provinceG]").attr("value",$(j).find("input[name=province]").attr("value"));$(j).find("input[name=cityG]").attr("value",$(j).find("input[name=city]").attr("value"));$(j).find("input[name=districtG]").attr("value",$(j).find("input[name=district]").attr("value"));$(j).find("input[name=streetG]").attr("value",$(j).find("input[name=street]").attr("value"));$(j).find("input[name=needL4AddrG]").attr("value",$(j).find("input[name=needL4Addr]").attr("value"));$("#current-address").text(g);$('textarea[name="address"]').parent().find("label").hide();if(h==undefined){h=""}var f=$("<div>").html(h);$('textarea[name="address"]').val(f[0].innerText);$('input[name="address"]').val(f[0].innerText);if(f[0].innerText!=null&&f[0].innerText!=""&&f[0].innerText!=undefined){$("#address-msg").html("");$("#address-msg").removeClass("report-errors");$("#address-msg").removeClass("label-error");$("#address-msg").removeClass("icon-error");$("#contactAddress-msg").html("");$("#contactAddress-msg").removeClass("label-error");$("#select-address-msg").html("")}$('textarea[name="contactAddress"]').parent().find("label").hide();$('textarea[name="contactAddress"]').val(f[0].innerText);$("#vatInvoice-address").parent().find("label").hide();$("#vatInvoice-address").val(f[0].innerText);$("#vatInvoice-address-error").html(" ")}else{ec.address.goSelectAddress(i);$('textarea[name="address"]').val("");$('textarea[name="address"]').parent().find("label").show();$('textarea[name="contactAddress"]').val("");$('textarea[name="contactAddress"]').parent().find("label").show();$("#vatInvoice-address").val("");$("#vatInvoice-address").parent().find("label").show();$('input[name="address"]').val("")}}else{ec.address.goSelectAddress(i);$('textarea[name="address"]').val("");$('textarea[name="address"]').parent().find("label").show();$('textarea[name="contactAddress"]').val("");$('textarea[name="contactAddress"]').parent().find("label").show();$("#vatInvoice-address").val("");$("#vatInvoice-address").parent().find("label").show();$('input[name="address"]').val("")}}else{$('textarea[name="address"]').val("");$('textarea[name="address"]').parent().find("label").show();$('textarea[name="contactAddress"]').val("");$('textarea[name="contactAddress"]').parent().find("label").show();$("#vatInvoice-address").val("");$("#vatInvoice-address").parent().find("label").show();$('input[name="address"]').val("");_tempAddress={};$(".form-address-name-tab").find("a:not(#street)").removeClass();ec.address.defaultTabValue();ec.address.cleanValue();ec.address.change(2)}}$("#myAddress-msg").hide();$("#myAddress-msg").removeClass()};ec.address.goSelectAddress=function(a){_tempAddress={};$(".form-address-name-tab").find("a:not(#street)").removeClass();ec.address.defaultTabValue();ec.address.cleanValue();var d=ec.address.getFormProcessType(ec.address.processType);$("#provice").removeClass("current");$("#city").removeClass("current");$("#district").removeClass("current");$("#street").removeClass("current");$("#provice").show();$("#city").show();$("#district").show();$("#street").hide();var c=1;var b="0";if($.trim(a.districtId)!=""&&a.districtId!=undefined){c=3;b=a.districtId;$(d).find("input[name=province]").attr("value",a.provinceId);$(d).find("input[name=city]").attr("value",a.cityId);$(d).find("input[name=district]").attr("value",a.districtId);$(d).find("input[name=street]").attr("value","");_tempAddress[0]=a.provinceName;_tempAddress[1]=a.cityName;_tempAddress[2]=a.districtName;$("#provice").text(a.provinceName);$("#city").text(a.cityName);$("#district").text(a.districtName);$("#city").attr("data-value",a.cityId);$("#district").attr("data-value",a.districtId);$("#street").show();$("#street").addClass("current");_tempAddressIds[0]=a.provinceId;_tempAddressIds[1]=a.cityId;_tempAddressIds[2]=a.districtId;$("#provice").attr("data-value",a.provinceId);$("#city").attr("data-value",a.cityId);$("#district").attr("data-value",a.districtId)}else{if($.trim(a.cityId)!=""&&a.cityId!=undefined){c=2;b=a.cityId;$(d).find("input[name=province]").attr("value",a.provinceId);$(d).find("input[name=city]").attr("value",a.cityId);$(d).find("input[name=district]").attr("value","");$(d).find("input[name=street]").attr("value","");_tempAddress[0]=a.provinceName;_tempAddress[1]=a.cityName;$("#provice").text(a.provinceName);$("#city").text(a.cityName);$("#city").attr("data-value",a.cityId);$("#district").addClass("current");_tempAddressIds[0]=a.provinceId;_tempAddressIds[1]=a.cityId;$("#provice").attr("data-value",a.provinceId);$("#city").attr("data-value",a.cityId)}else{if($.trim(a.provinceId)!=""&&a.provinceId!=undefined){c=1;b=a.provinceId;$(d).find("input[name=province]").attr("value",a.provinceId);$(d).find("input[name=city]").attr("value","");$(d).find("input[name=district]").attr("value","");$(d).find("input[name=street]").attr("value","");_tempAddress[0]=a.provinceName;$("#provice").text(a.provinceName);$("#city").addClass("current");_tempAddressIds[0]=a.provinceId;$("#provice").attr("data-value",a.provinceId)}else{c=0}}}$("#provice_info").find("a").bind("click",ec.address.againSelectAddress);ec.address.setValue(a);ec.address.queryData(ec.address.parseUrl(children_url,parseInt(b)),true,c+1,ec.address.queryProvince)};ec.address.sendKeyWordToBack=function(b){var a=b.length;if(a<2){$("#form-address-no").show();$("#address-search .form-address-search-list ul").hide()}else{$("#form-address-no").hide();$("#address-search .form-address-search-list ul").show();var c={keywords:b};$.ajax({type:"GET",url:domainShoppingConfig+"/data/searchByKeywords.json",async:false,data:c,dataType:"jsonp",success:function(f){var e=f.data;if($.trim(e)!=""&&e!=undefined){d(f.data)}else{$("#address-search .form-address-search-list ul").empty();$("#form-address-no").show()}}})}function d(e){$("#form-address-no").hide();$("#address-search .form-address-search-list ul").empty();$.each(e,function(f,g){$("#address-search .form-address-search-list ul").append("<li><p>"+g.name+"</p><span id=pcd-"+f+'></span><a href="javascript:;" onclick=\'ec.address.location(ec.util.escapeHtml("'+g.name+'"),"'+g.location+"\")'>\u9009\u62e9</a></li>");$("#pcd-"+f).text(g.provinceName+g.cityName+g.distinctName)})}};ec.address.cleanKeyWord=function(){$("#address-search input").val("")};ec.address.bindSeelctEvent=function(){new ec.address.oSearchSuggest(ec.address.sendKeyWordToBack);$("#current-address").bind("click",function(){if($("#gouldAddress").val()==0){ec.address.processAddress()}else{$("#address-search").show()}});$(".btn-address-close").bind("click",function(){ec.address.hiddenTips()});$(".form-address-search-text a").click(function(){ec.address.cleanKeyWord()})};ec.address.setValue=function(a){if(a.province!=undefined&&a.province!=""){_tempAddress[0]=a.provinceName;_tempAddressIds[0]=a.province;$("#provice").attr("data-value",a.province);$("#provice").text(a.provinceName)}if(a.city!=undefined&&a.city!=""){_tempAddress[1]=a.cityName;_tempAddressIds[1]=a.city;$("#city").attr("data-value",a.city);$("#city").text(a.cityName)}if(a.district!=undefined&&a.district!=""){_tempAddress[2]=a.districtName;_tempAddressIds[2]=a.district;$("#district").attr("data-value",a.district);$("#district").text(a.districtName)}if(a.street!=undefined&&a.street!=""){_tempAddress[3]=a.streetName;_tempAddressIds[3]=a.street;$("#street").attr("data-value",a.street);$("#street").text(a.streetName)}};ec.address.defaultTabValue=function(){$("#provice").text("\u8bf7\u9009\u62e9");$("#city").text("\u8bf7\u9009\u62e9");$("#district").text("\u8bf7\u9009\u62e9");$("#street").text("\u8bf7\u9009\u62e9");$("#street").hide();$("#provice").attr("data-value","");$("#city").attr("data-value","");$("#district").attr("data-value","");$("#street").attr("data-value","");$(".form-address-name-tab").find("a").removeClass()};ec.address.cleanValue=function(){address=[];_tempAddress={};_tempAddressIds={}};ec.address.cleanFormValue=function(){var a=ec.address.getFormProcessType(ec.address.processType);$(a).find("input[name=province]").attr("value","");$(a).find("input[name=city]").attr("value","");$(a).find("input[name=district]").attr("value","");$(a).find("input[name=street]").attr("value","")};ec.address.replaceChar=function(a){if(a!=null&&a!=""&&a=="-"){return"\u5176\u5b83\u5730\u533a"}else{return a}};ec.address.query=function(a,c,d){var b;if(c&&(b=cache[a])){return d(b)}if(ajaxer){ajaxer.abort()}ajaxer=$.ajax({url:a,type:"get",dataType:"jsonp",success:function(e){if(c){cache[a]=e}d(e)},error:function(f,e){logger.warn("load data fail.")}})};ec.address.format=function(e){var a,g,f,h;$("input[name='province']").val(e.values[0]);$("input[name='city']").val(e.values[1]);$("input[name='district']").val(e.values[2]);$("input[name='street']").val(e.values[3]);for(var d=0;d<e.data.length;d++){for(var c=0;c<e.data[d].length;c++){if(e.data[d][c].id==e.values[0]){a=e.data[d][c].name;break}if(e.data[d][c].id==e.values[1]){g=e.data[d][c].name;break}if(e.data[d][c].id==e.values[2]){f=e.data[d][c].name;break}if(e.data[d][c].id==e.values[3]){h=e.data[d][c].name;break}}}var b=a+"&nbsp;&gt;&nbsp;"+g+"&nbsp;&gt;&nbsp;"+ec.product.replaceChar(f);if(h!=null){b=b+"&nbsp;&gt;&nbsp;"+ec.product.replaceChar(h)}$("#address").find("a").html(b)};ec.address.getFormProcessType=function(a){var b="#myAddress-form";switch(a){case"1":b="#vatinvoice-person-form";break;case"2":b="#exchange-form";break;default:b="#myAddress-form";break}return b};ec.address.reset=function(){_tempAddress={};_tempAddressIds={};$("#provice").attr("data-value","");$("#city").attr("data-value","");$("#district").attr("data-value","");$("#street").attr("data-value","");$("#provice").html("\u8bf7\u9009\u62e9");$("#city").html("\u8bf7\u9009\u62e9");$("#district").html("\u8bf7\u9009\u62e9");$("#street").html("\u8bf7\u9009\u62e9");$("#address-search .form-address-search-list ul").html("")};
